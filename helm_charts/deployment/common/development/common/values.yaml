# Default values for common.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

services:
  port: 80
  protocol: TCP
  type: ClusterIP
  annotations:
    alb.ingress.kubernetes.io/target-type: ip
  endpoints:
    # - name: sample-service
    #   context: /sample-service/v1
    - name: client-service
      context: /client-service/v1
    - name: product-service
      context: /product-service/v1
    - name: fin-crime-service
      context: /fin-crime-service/v1
    - name: account-service
      context: /account-service/v1
    - name: notification-service
      context: /notification-service/v1
    - name: payment-service
      context: /payment-service/v1

ingress:
  enabled: true
  namePostfix: -api-ingress
  annotations:
    apigateway.ingress.kubernetes.io/cf-s3-bucket-name: dev-xyz-ingress-cf-s3-bucket
    apigateway.ingress.kubernetes.io/cf-s3-object-key: dev-ingress.yaml
    apigateway.ingress.kubernetes.io/gateway-cache-enabled: "true"
    apigateway.ingress.kubernetes.io/gateway-cache-size: "0.5"
    #apigateway.ingress.kubernetes.io/public-resources: '[{"path":"/client-service/v1/client/create","caching_enabled":false,"method":["POST"]},{"path":"/client-service/v1/client/update/{clientid}","caching_enabled":false,"path_params":[{"param":"clientid","required":true}],"method":["POST","PATCH"]},{"path":"/client-service/v1/client/{accountid}/loans","caching_enabled":true,"path_params":[{"param":"accountid","required":true}],"method":["GET"]},{"path":"/client-service/v1/client/{accountid}/savings","caching_enabled":true,"path_params":[{"param":"accountid","required":true}],"method":["GET"]},{"path":"/product-service/v1/savings/products","caching_enabled":true,"method":["GET"]},{"path":"/greet-service/v1/greet","caching_enabled":true,"method":["GET"]}]'
    apigateway.ingress.kubernetes.io/api-key-based-usage-plans: '[{"plan_name":"Gold","description":"Gold Plan","api_keys":[{"generate_distinct_id":true,"name":"dev_api_key"}],"quota_limit":100000,"quota_period":"MONTH","throttle_burst_limit":100,"throttle_rate_limit":100}]'
    apigateway.ingress.kubernetes.io/request-timeout-millis: "29000"
    apigateway.ingress.kubernetes.io/tls-policy: TLS_1_2
    apigateway.ingress.kubernetes.io/stage-name: prod
    apigateway.ingress.kubernetes.io/apigw-endpoint-type: REGIONAL
    kubernetes.io/ingress.class: apigateway
    apigateway.ingress.kubernetes.io/custom-domain-name: xxxxx.xyz.co
    apigateway.ingress.kubernetes.io/certificate-arn: arn:aws:acm:us-east-2:xxx:certificate/xxx
    apigateway.ingress.kubernetes.io/hosted-zone-name: api.xyz.com.
    apigateway.ingress.kubernetes.io/custom-domain-base-path: services
    apigateway.ingress.kubernetes.io/route53-assume-role-arn: arn:aws:iam::xxx:role/xxx
    apigateway.ingress.kubernetes.io/min-compression-size: "10485760"
    apigateway.ingress.kubernetes.io/nginx-image: "nginx:1.19.6"
    apigateway.ingress.kubernetes.io/waf-enabled: "true"
    apigateway.ingress.kubernetes.io/waf-scope: REGIONAL
    apigateway.ingress.kubernetes.io/waf-rule-cf-json: '[{"Name":"RuleWithOWSAPRules","Priority":0,"OverrideAction":{"Count":{}},"VisibilityConfig":{"SampledRequestsEnabled":true,"CloudWatchMetricsEnabled":true,"MetricName":"RuleWithOWSAPRulesMetric"},"Statement":{"RuleGroupReferenceStatement":{"Arn":"arn:aws:wafv2:us-east-1:111111111111:regional/rulegroup/dev-xyz-IL-OwsapRuleGroup/99c22082-bd31-4bc3-998e-4f40d1fae846","ExcludedRules":[]}}},{"Name":"RuleWithAWSManagedKnownBadInputsRules","Priority":2,"OverrideAction":{"None":{}},"VisibilityConfig":{"SampledRequestsEnabled":true,"CloudWatchMetricsEnabled":true,"MetricName":"RuleWithAWSManagedKnownBadInputsRulesMetric"},"Statement":{"ManagedRuleGroupStatement":{"VendorName":"AWS","Name":"AWSManagedRulesKnownBadInputsRuleSet","ExcludedRules":[]}}},{"Name":"RuleWithAWSManagedSQLInjectInputsRules","Priority":3,"OverrideAction":{"None":{}},"VisibilityConfig":{"SampledRequestsEnabled":true,"CloudWatchMetricsEnabled":true,"MetricName":"RuleWithAWSManagedSQLInjectInputsRulesMetric"},"Statement":{"ManagedRuleGroupStatement":{"VendorName":"AWS","Name":"AWSManagedRulesSQLiRuleSet","ExcludedRules":[]}}},{"Name":"RuleWithAWSManagedLinuxnRules","Priority":4,"OverrideAction":{"None":{}},"VisibilityConfig":{"SampledRequestsEnabled":true,"CloudWatchMetricsEnabled":true,"MetricName":"RuleWithAWSManagedLinuxRulesMetric"},"Statement":{"ManagedRuleGroupStatement":{"VendorName":"AWS","Name":"AWSManagedRulesLinuxRuleSet","ExcludedRules":[]}}},{"Name":"RuleWithAWSManagedIPReputationRules","Priority":5,"OverrideAction":{"None":{}},"VisibilityConfig":{"SampledRequestsEnabled":true,"CloudWatchMetricsEnabled":true,"MetricName":"RuleWithAWSManagedIPReputationRulesMetric"},"Statement":{"ManagedRuleGroupStatement":{"VendorName":"AWS","Name":"AWSManagedRulesAmazonIpReputationList","ExcludedRules":[]}}},{"Name":"RuleWithAWSManagedAdminProtectionRules","Priority":6,"OverrideAction":{"None":{}},"VisibilityConfig":{"SampledRequestsEnabled":true,"CloudWatchMetricsEnabled":true,"MetricName":"RuleWithAWSManagedAdminProtectionRulesMetric"},"Statement":{"ManagedRuleGroupStatement":{"VendorName":"AWS","Name":"AWSManagedRulesAdminProtectionRuleSet","ExcludedRules":[]}}}]'
    apigateway.ingress.kubernetes.io/aws-api-configs: '[{"name":"Dev-API-For-OS","context":"osapi","authorizers":[{"id_source":"method.request.header.Authorization","authorizer_type":"COGNITO_USER_POOLS","authorizer_name":"dev-OSCognitoAuthorizer","provider_arns":["arn:aws:cognito-idp:us-east-1:111111111111:userpool/us-east-1_cFWWsJTl4"]}],"apis":[{"path":"/m2mauthorizer","caching_enabled":false,"type":"Mock","method":[{"method":"ANY","api_key_enabled":false,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/clientauthorizer","caching_enabled":false,"type":"Lambda","lambda_arn":"arn:aws:lambda:us-east-1:111111111111:function:dev-OS-validation-lambda-function","method":[{"method":"POST","api_key_enabled":false,"authorization_enabled":false}]},{"path":"/signup","caching_enabled":false,"type":"Lambda","lambda_arn":"arn:aws:lambda:us-east-1:111111111111:function:dev-OS-signup-lambda","method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/changeusername","caching_enabled":false,"type":"Lambda","lambda_arn":"arn:aws:lambda:us-east-1:111111111111:function:dev-OS-changeusername-lambda","method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/resetpassword","caching_enabled":false,"type":"Lambda","lambda_arn":"arn:aws:lambda:us-east-1:111111111111:function:dev-OS-resetpassword-lambda","method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/product-service/v1/product/{productEncodedKey}","caching_enabled":false,"path_params":[{"param":"productEncodedKey","required":true}],"method":[{"method":"GET","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/product-service/v1/product","caching_enabled":false,"path_params":[{"param":"productEncodedKey","required":true}],"method":[{"method":"GET","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/fin-crime-service/v1/fin-crime/runStrategy","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/fin-crime-service/v1/fin-crime/accountStatus/{account-id}","caching_enabled":false,"path_params":[{"param":"account-id","required":true}],"method":[{"method":"GET","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/fin-crime-service/v1/fin-crime/webhook/account-status","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":false,"authorization_enabled":false,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/fin-crime-service/v1/fin-crime/webhook/referral","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":false,"authorization_enabled":false,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/fin-crime-service/v1/fin-crime/webhook/journey","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":false,"authorization_enabled":false,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/fin-crime-service/v1/fin-crime/webhook/monitor","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":false,"authorization_enabled":false,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/notification-service/v1/notifications","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/notification-service/v1/notifications","caching_enabled":false,"method":[{"method":"GET","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/notification-service/v1/notifications/{notificationId}","caching_enabled":false,"path_params":[{"param":"notificationId","required":true}],"method":[{"method":"GET","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/account-service/v1/accounts/deposits","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/account-service/v1/cb/webhook/createaccount/success","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":false,"authorization_enabled":false}]},{"path":"/account-service/v1/accounts","caching_enabled":false,"method":[{"method":"GET","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/payment-service/v1/payment/transactions","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/payment-service/v1/payment/prematurity","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/payment-service/v1/cb/webhook/transaction-settled","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":false,"authorization_enabled":false,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/payment-service/v1/cb/webhook/message-assessment-failed","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":false,"authorization_enabled":false,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/payment-service/v1/cb/webhook/message-validation-failed","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":false,"authorization_enabled":false,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/payment-service/v1/cb/webhook/transaction-rejected","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":false,"authorization_enabled":false,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/payment-service/v1/cb/webhook/inbound-held","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":false,"authorization_enabled":false,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/payment-service/v1/cb/webhook/outbound-held","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":false,"authorization_enabled":false,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/payment-service/v1/mambu/webhook/maturity","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":false,"authorization_enabled":false,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/account-service/v1/accounts/{clientid}","caching_enabled":false,"path_params":[{"param":"clientid","required":true}],"method":[{"method":"PUT","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/payment-service/v1/payment/fps","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/payment-service/v1/payment/auditDetails","caching_enabled":false,"method":[{"method":"GET","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]}],"api_key_enabled":true,"authorization_enabled":true,"logging_level":"INFO"},{"name":"Dev-Private-IL-API-For-OS","type":"PRIVATE","vpc_id":"vpc-08e321b711fe45fa5","authorizers":[{"id_source":"method.request.header.Authorization","authorizer_type":"COGNITO_USER_POOLS","authorizer_name":"dev-OSCognitoAuthorizer","provider_arns":["arn:aws:cognito-idp:us-east-1:111111111111:userpool/us-east-1_cFWWsJTl4"]}],"apis":[{"path":"/m2mauthorizer","caching_enabled":false,"type":"Mock","method":[{"method":"ANY","api_key_enabled":false,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/clientauthorizer","caching_enabled":false,"type":"Lambda","lambda_arn":"arn:aws:lambda:us-east-1:111111111111:function:dev-OS-validation-lambda-function","method":[{"method":"POST","api_key_enabled":false,"authorization_enabled":false}]},{"path":"/signup","caching_enabled":false,"type":"Lambda","lambda_arn":"arn:aws:lambda:us-east-1:111111111111:function:dev-OS-signup-lambda","method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/changeusername","caching_enabled":false,"type":"Lambda","lambda_arn":"arn:aws:lambda:us-east-1:111111111111:function:dev-OS-changeusername-lambda","method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/resetpassword","caching_enabled":false,"type":"Lambda","lambda_arn":"arn:aws:lambda:us-east-1:111111111111:function:dev-OS-resetpassword-lambda","method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/product-service/v1/product/{productEncodedKey}","caching_enabled":false,"path_params":[{"param":"productEncodedKey","required":true}],"method":[{"method":"GET","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/product-service/v1/product","caching_enabled":false,"path_params":[{"param":"productEncodedKey","required":true}],"method":[{"method":"GET","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/account-service/v1/accounts/deposits","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/account-service/v1/accounts","caching_enabled":false,"method":[{"method":"GET","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/payment-service/v1/payment/transactions","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/payment-service/v1/payment/prematurity","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/fin-crime-service/v1/fin-crime/runStrategy","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/fin-crime-service/v1/fin-crime/accountStatus/{account-id}","caching_enabled":false,"path_params":[{"param":"account-id","required":true}],"method":[{"method":"GET","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/notification-service/v1/notifications","caching_enabled":false,"method":[{"method":"POST","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/notification-service/v1/notifications","caching_enabled":false,"method":[{"method":"GET","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/notification-service/v1/notifications/{notificationId}","caching_enabled":false,"path_params":[{"param":"notificationId","required":true}],"method":[{"method":"GET","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/account-service/v1/accounts/{clientid}","caching_enabled":false,"path_params":[{"param":"clientid","required":true}],"method":[{"method":"PUT","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]},{"path":"/payment-service/v1/payment/auditDetails","caching_enabled":false,"method":[{"method":"GET","api_key_enabled":true,"authorization_enabled":true,"authorizator_index":0,"scopes":["m2m/accesstokenscope"]}]}],"api_key_enabled":true,"authorization_enabled":true,"logging_level":"INFO"}]'